<html>
<head>
<script type="text/javascript" src="js/processing.js"></script>
</head>

<body>

<script type="text/processing">

//Earth Particles made on 28th September, 2021.

Class Solid;
Class Liquid;
ArrayList <Gas> g;

//PFont head; 
//PFont body; 

float stage = 0;

Solid s;
Liquid l;

void setup() {
  size (1000, 1000);
  
  smooth(); 
    //head = createFont ("SpaceGrotesk-SemiBold.ttf", 21); 
    //body = createFont ("IBMPlexSans-LightItalic.ttf", 14); 
    
  s = new Solid ();
  l = new Liquid ();
  g = new ArrayList <Gas> ();
  
}

class Gas {
  float x;
  float y;
  float r;

  float v = 0;
  float transp = 100;
  
  float radius = random (19, 27);; 

  Gas() {
    x = random(0, 50);
    y=0;
    r=25;
  }

  void display() {
    noStroke();
    fill (0);
    x=mouseX+random(-2, 2);
    y=mouseY+v+random (-2, 2);
    fill (0, transp);
    
    ellipse (x, y, radius, radius);
    ellipse (x+random(25, 30), y, radius, radius);
    ellipse (x-random(24, 29), y, radius, radius);
    ellipse (x-random(50, 55), y, radius, radius);
    
  }

  void ascend() {
    v--;
    transp--;
  }
}

class Liquid {
  float x;
  float y;
  float r;
  
  float delay = 0.5;

  int numShapes = 16;
  int currentShape = 0;                   // counter
  float[] shapeX = new float[numShapes];  // x coordinates
  float[] shapeY = new float[numShapes];  // y coordinates
  float[] shapeA = new float[numShapes];  // alpha values
  int shapeSize = 25;

  Liquid() {
    x = mouseX;
    y = mouseY;
    r = 25;
  }
  void display() {
    noStroke();
    fill (100);

    shapeX[currentShape] = mouseX;
    shapeY[currentShape] = mouseY;
    shapeA[currentShape] = 255;

    for (int i=0; i<numShapes; i++) {
      fill(0, shapeA[i]);
      ellipse(shapeX[i], shapeY[i], shapeSize, shapeSize);
      shapeA[i] -= 255/numShapes;
    }

    // increment counter
    currentShape++;
    currentShape %= numShapes;  // rollover counter to 0 when up to numShapes
  }
}

class Solid {
  float x;
  float y;
  float r;

  Solid() {
    x = mouseX;
    y = mouseY;
    r=20;
  }
  void display() {
    noStroke();
    fill (0);
    x = mouseX;
    y = mouseY;

    translate (mouseX-r*2, mouseY-r*2);
    for (int x = 0; x<100; x=x+25) {
      for (int y = 0; y<100; y=y+25) {
        ellipse (x, y, 25, 25);
      }
    }
  }

  void ascend() {
    if (y>0) {
      y--;
    }
    x=x+random (-2, 2);
  }

  void edge() {
    if (y==0) {
      y=0;
    }
  }
}

void draw() {
  background (255);
  
  fill (0); 
    
    textAlign (LEFT, TOP); 
    //textFont (head); 
    textSize (21); 
  text ("States of Matter", 35, 33); 
  //textFont (body); 
  textSize (14); 
  text ("Digital mouse based interaction", 35, 60); 
  
  noCursor(); 

  //Solid
  if (stage==0) {
    textAlign (CENTER); 
    //textFont (head); 
    text ("Solid", 500, 930); 
    //textFont (body); 
    textSize (14); 
    text ("Click to toggle", 500, 950); 
    s.display();
  }

  //Liquid
  if (stage ==1) {
        textAlign (CENTER); 
    //textFont (head); 
    text ("Liquid", 500, 930); 
    //textFont (body); 
    textSize (14); 
    text ("Click to toggle", 500, 950); 
    l.display();
  }

  //Gas
  if (stage == 2) {
            textAlign (CENTER); 
    //textFont (head); 
    text ("Gas", 500, 930); 
    //textFont (body); 
    textSize (14); 
    text ("Click to toggle", 500, 950); 
    if (frameCount%24==2) {
      g.add (new Gas());
    }

    for (Gas p : g) {
      p.display();
      p.ascend();
    }
  }
}

void mouseClicked() {
  stage = stage +1;
  if (stage == 3) {
    stage =0;
  }
}


</script>
<canvas id = "sketch" style = "border: 1px solid black; "></canvas>

</body>
</html>
