<html>
<head>
<script type="text/javascript" src="js/processing.js"></script>
</head>

<body>

<script type="text/processing">
//Variable Geometry Generator; Arjun 2021.

ArrayList <Shape> shapes;

color bg = 0;

boolean skelMode = false;


int counter = 4;

void setup() {
  size (1000, 1000);
  smooth();

  shapes = new ArrayList <Shape>();
  shapes.add (new Shape (mouseX, mouseY));
}

class Shape {
  float p1x = 500;
  float p1y = 200;
  float dest1x=500;
  float dest1y=p1y;

  float p2x = 200;
  float p2y = 500;
  float dest2x=200;
  float dest2y=p1y;

  float p3x = 500;
  float p3y = 800;
  float dest3x=p3x;
  float dest3y=p3y;

  float p4x = 800;
  float p4y = 500;
  float dest4x=p3x;
  float dest4y=p3y;
  
  color docLines = #337055; 
     color OGlines = #04be9f; 


  Shape(float tempX, float tempY) {
    float p1x = tempX;
    float p1y = tempY;
  }

  void display() {
    strokeWeight (15);
    stroke (OGlines);


    point (p1x, p1y);
    point (p2x, p2y);
    point (p3x, p3y);
    point (p4x, p4y);

if (skelMode == true){
    strokeWeight (2);
    stroke (OGlines);
   noFill(); 
}

else {
      strokeWeight (0);
    stroke (OGlines);
   fill (OGlines, 75); 
}

    beginShape(TRIANGLE_STRIP);
    vertex (p1x, p1y);
    vertex (p2x, p2y);
    vertex (p3x, p3y);
    vertex (p4x, p4y);
    vertex (p1x, p1y);
    endShape(CLOSE);

    p1x = lerp (p1x, dest1x, 0.01);
    p1y = lerp (p1y, dest1y, 0.01);
    p2x = lerp (mouseX, dest2x, 0.01);
    p2y = lerp (mouseY, dest2y, 0.01);
    p3x = lerp (p3x, dest3x, 0.01);
    p3y = lerp (p3y, dest3y, 0.01);
    p4x = lerp (p4x, dest4x, 0.01);
    p4y = lerp (p4y, dest4y, 0.01);

    if (frameCount%60==0) {
      dest1x = random (0, height);
      dest1y = random (0, height);
      dest2x = random (0, height);
      dest2y = random (0, height);
      dest3x = random (0, height);
      dest3y = random (0, height);
      dest4x = random (0, height);
      dest4y = random (0, height);
    }
  }
}
void draw() {
  background (bg);


  textAlign (LEFT, TOP);
  fill (#e5e3e5);
  text ("Points & Lines", 40, 40);
  text (+counter, 940, 40);
  fill (#6d6d6d);

  fill (#e5e3e5);
  text ("MOUSE_LEFT ", 765, 895);
  text ("MOUSE_RIGHT ", 765, 920);
  text ("S ", 765, 945);

  text ("TO ADD A SHAPE. ", 844, 895);
  text ("TO DELETE A SHAPE ", 850, 920);
  text ("TO TOGGLE STROKE ONLY ", 778, 945);


  for (int i = shapes.size()-1; i >= 0; i--) {
    Shape shaper = shapes.get(i);
    shaper.display();
  }
}

void mousePressed() {
  if (mousePressed&&mouseButton==LEFT) {
    shapes.add (new Shape (mouseX, mouseY));
    counter = counter+4;
  }

  if (mousePressed &&mouseButton == RIGHT) {
    shapes.remove (0);
    counter = counter-4;
  }
}

void keyPressed() {
  if (key=='s'||key=='S') {
    skelMode = !skelMode;
  }
}

</script>
<canvas id = "sketch" style = "border: 0px solid black; "></canvas>

</body>
</html>
